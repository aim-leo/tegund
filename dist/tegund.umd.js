!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tegund=e():t.tegund=e()}(this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e){function i(t){return Object.prototype.toString.call(t)}function n(...t){return!(t.length<2)&&t.every(e=>i(e)===i(t[0]))}function r(t,e){if(!n(e,[]))throw new Error("list expect a "+i([]));let r=!1;for(const i in e)if(n(e[i],t)){r=!0;break}return r}function s(...t){return n(...t,[])}function a(...t){return n(...t,"")}function o(...t){return n(...t,1)&&!c(...t)}function c(...t){return t.every(t=>Number.isNaN(t))}function h(...t){return t.every(t=>r(t,[()=>{},async()=>{}]))}const l=["Boolean","String","Number","Symbol","Promise","NaN","Undefined","Pattern","Function","SyncFunction","AsyncFunction","Date","Set"],d=["Float","Integer","Empty"],u=["Object","Array"],f=[...l,...d,...u],m={isArray:s,isBoolean:function(...t){return n(...t,!0)},isFunction:h,isSyncFunction:function(...t){return t.every(t=>n(t,()=>{}))},isAsyncFunction:function(...t){return t.every(t=>n(t,async()=>{}))},isNaN:c,isNumber:o,isInteger:function(...t){return o(...t)&&t.every(t=>t%1==0)},isFloat:function(...t){return o(...t)&&t.every(t=>t%1!=0)},isString:a,isSymbol:function(...t){return n(...t,Symbol("Symbol"))},isUndefined:function(...t){return n(...t,void 0)},isObject:function(...t){return n(...t,{})},isNull:function(...t){return n(...t,null)},isPromise:function(...t){return n(...t,Promise.resolve())},isPattern:function(...t){return n(...t,/d/)},isDate:function(...t){return t.every(t=>n(t,new Date))},isSet:function(...t){return t.every(t=>n(t,new Set))},isEmpty:function(...t){return t.every(t=>""===t||0===t||null==t||Number.isNaN(t))}};function p(t){if(!a(t))throw console.error("getValidateByType",t),new Error("type expected a string");return m["is"+t]}t.exports={whatType:i,isType:n,inType:r,allValidates:m,...m,baseTypes:l,sugerTypes:d,stuctTypes:u,allTypes:f,getValidateByType:p,getValidateType:function(t){if(!h(t))throw new Error("validate expected a function");return t.name.replace("is","")},asset:function(t,e,n){if(!h(e)){if(a(e)&&(e=[e]),s(e)){for(const i of e){if(!a(i))throw new Error("asset validator expected a string array | string | function");if(p(i)(t))return}throw new Error(n||`obj expected a ${e.join(" | ")} type, but got a ${i(t)}`)}throw new Error("asset validator expected a string array | string | function")}if(!e(t))throw new Error(n||"validate error")}}},function(t,e,i){const{asset:n,isUndefined:r,isNull:s,isNaN:a,isArray:o}=i(0);t.exports={objectOverflow:function(t,e){for(const i in t)if(!(i in e))return i},relateDate:function(t,e){n(t,"Date"),n(e,"Date");const i=t.getTime(),r=e.getTime();return i===r?0:i<r?-1:1},formatDate:function(t){return n(t,"Date"),t.toISOString()},defineUnEnumerableProperty:function(t,e,i){Object.defineProperty(t,e,{value:i,enumerable:!1,writable:!0})},removeEmpty:function(t,{removeUndefined:e=!0,removeNull:i=!0,removeNaN:c=!1,removeEmptyString:h=!1,removeEmptyArray:l=!1,removeFalse:d=!1}={}){n(t,"Object");const u={};for(const n in t){const f=t[n];e&&r(f)||(i&&s(f)||c&&a(f)||h&&""===f||l&&o(f)&&0===f.length||d&&!1===f||(u[n]=f))}return u}}},function(t,e,i){const{allTypes:n}=i(0),{T:r,ObjectT:s,ArrayT:a,NotAtT:o,AtT:c,NeverT:h}=i(3),{defineUnEnumerableProperty:l}=i(1),d={at:(...t)=>new c(...t),notat:(...t)=>new o(...t)};u("any",new r),u("never",new h);for(const t of n){u(t.toLowerCase(),(...e)=>{const i=new("Object"===t?s:"Array"===t?a:r)(...e);return i.type(t),i})}function u(t,e){if(t in d)throw new Error(t+" is defined, please check");return d[t]="function"==typeof e?e:()=>e.clone(),d[t]}l(d,"defineType",u),t.exports=d},function(t,e,i){const{ValidateTypeError:n,ValidateError:r}=i(4),{rangeMixin:s,enumMixin:a,patternMixin:o,dateRangeMixin:c,numberRangeMixin:h,useMixin:l}=i(6),{asset:d,isFunction:u,isString:f,getValidateByType:m,isObject:p}=i(0),{objectOverflow:_}=i(1);class g{constructor(){this._type=null,this._alias=null,this._validate=[],this._optional=!1,this._context={},l(this,a)}type(t){const e=this._format2TypeString(t);return this._type=e,["String","Array"].includes(this._type)&&l(this,s),["Number","Integer","Float"].includes(this._type)&&l(this,h),["String","Number","Integer","Float"].includes(this._type)&&l(this,o),"Date"===this._type&&l(this,c),this}alias(t){return d(t,"String","alias expected a string"),this._alias=t,this}forbid(t=!0){return d(t,"Boolean"),this.constructor=t?w:g,this}setContext(t,e){return d(t,"String","context expected a object"),this._context[t]=e,this}clearContext(t){return t?delete this._context[t]:this._context={},this}addValidator({name:t,validator:e,message:i}){if(d(e,"Function"),i&&!f(i)&&!u(i))throw new Error("message expected a string || function");if(t&&d(t,"String"),t){const e=this._validate.map(t=>t.name).indexOf(t);-1!==e&&this._validate.splice(e,1)}return this._validate.push({validator:e,message:i,name:t}),this}removeValidator(t){d(t,"String"),d(t,t=>!!t);const e=this._validate.map(t=>t.name).indexOf(t);-1!==e&&this._validate.splice(e,1)}test(...t){let e=null;try{e=function(){if(this.constructor===w)return t.length>0?new r({message:"this field is not allow to entered"}):void 0;if(0===t.length)return new r({message:`None is not a ${this._type} type`});for(const e in t){const i=t[e];if(void 0===i&&this._optional)continue;let s=!1;if(this._type){const t=m(this._type);u(t)&&t(i)&&(s=!0)}else s=!0;if(!s)return new n({source:i,index:e,type:this._type});for(const t of this._validate){const e=t.validator.call(this,i);if(e instanceof r)return e;if(!1===e)return new r({message:t.message,source:i})}}}.call(this)}catch(t){return t}return e}check(...t){return!(this.test(...t)instanceof r)}optional(t=!0){return this._optional=t,this}clone(){const t=new g;return Object.assign(t,this),t}_format2TypeString(t){return t instanceof g?t._type:f(t)?t:void 0}_format2Type(...t){const e=i(2),n=[];for(const i of t)i instanceof g?n.push(i):f(i)&&i in e&&n.push(e[i]());return n}}class y extends g{constructor(...t){super(),this._maybeCondition=[],this.or(...t)}or(...t){return this._format2Type(...t).map(t=>this._maybeCondition.push(t)),this}test(...t){const e=super.test(...t);if(e)return e;const i=t=>{for(const e of this._maybeCondition){if(!e.test(t))return!0}};for(const e of t)if(void 0!==e||!this._optional){if(!(this instanceof x||i(e)))return new r;if(this instanceof x&&i(e))return new r}}clone(){const t=new y;return Object.assign(t,this),t._maybeCondition=this._maybeCondition.map(t=>t.clone()),t}setContext(...t){if(super.setContext(...t),this._maybeCondition)for(const e of this._maybeCondition)e.setContext(...t);return this}clearContext(...t){if(super.clearContext(...t),this._maybeCondition)for(const e of this._maybeCondition)e.clearContext(...t);return this}}class x extends y{clone(){const t=new x;return Object.assign(t,this),t._maybeCondition=this._maybeCondition.map(t=>t.clone()),t}}class b extends g{constructor(t){super(),this._child=null,this._strict=!1,this.type("Object"),void 0!==t&&this.setChild(t)}setChild(t){if(d(t,"Object"),t instanceof g)return;const e={},n=i(2);for(const i in t){const r=t[i];if(r instanceof g)e[i]=r;else if(f(r))if(r in n)e[i]=n[r]();else{const t=new g;t.type(r),e[i]=t}else Array.isArray(r)?e[i]=new v(r):"object"==typeof r&&(e[i]=new b(r))}this._child=e}testProvided(...t){this.setContext("ignoreUnprovided",!0);const e=this.test(...t);return this.clearContext("ignoreUnprovided"),e}strict(t=!0){return d(t,"Boolean","strict is expected a boolean"),this._strict=t,this}extend(...t){for(let e of t)if(e instanceof b)this._child=Object.assign(this._child||{},e._child);else{if(!p(e))throw new Error("combine expected a object or a ObjectT, but got a "+e);e=new b(e),this._child=Object.assign(this._child||{},e._child)}return this}clone(){const t=new b;Object.assign(t,this);for(const e in this._child)t._child[e]=this._child[e].clone();return t}setContext(...t){if(super.setContext(...t),this._child)for(const e in this._child)this._child[e].setContext(...t);return this}clearContext(...t){if(super.clearContext(...t),this._child)for(const e in this._child)this._child[e].clearContext(...t);return this}test(...t){const e=super.test(...t);if(e)return e;for(const e in t){const i=t[e];if(this._strict){const n=_(i,this._child);if(n)return new r({message:`Cannot set properties other than Shema${t.length>1?", at index:"+e+",":""}, prop: ${n}`})}for(const n in this._child){if(this._context.ignoreUnprovided&&!(n in i))continue;const s=i[n],a=this._child[n];if(a.constructor===w)return n in i?new r({message:`${t.length>1?"Index:"+e+",":""}field ${n} is not allow to entered`}):void 0;{const i=a.test(s);if(i)return new r({...i,message:`${t.length>1?"Index:"+e+",":""}field ${n} validate error, ${i.message}`})}}}}}class v extends g{constructor(...t){super(),this._child=null,this._childCate=null,this.type("Array"),t.length>0&&this.setChild(...t)}setChild(...t){if(this._childCate=null,this._child=null,0===t.length)return this;if(1===t.length&&Array.isArray(t[0])){if(0===t[0].length)throw new Error("array struct should not be empty");this._child=[];for(const e in t[0]){const i=t[0][e];if(void 0===i)continue;const n=this._format2Type(i)[0];if(!(n instanceof g))throw new Error("every item of array should be a T");this._child[e]=n}return this}const e=this._format2Type(...t);for(const t of e)if(!(t instanceof g))throw new Error("every item of array should be a T");return this._childCate=1===t.length?e[0]:new y(...e),this}test(...t){const e=super.test(...t);if(e)return e;if(this._child)for(const e of t)for(const t in this._child){const i=this._child[t];if(!i)continue;const n=i.test(e[t]);if(n)return n}if(this._childCate)for(const e of t){if(0===e.length)continue;const t=this._childCate.test(...e);if(t)return t}}clone(){const t=new v;Object.assign(t,this);for(const e in this._child)t._child[e]=this._child[e].clone();return Array.isArray(this._childCate)?t._childCate=this._childCate.map(t=>t.clone()):this._childCate instanceof g&&(t._childCate=this._childCate.clone()),t}setContext(...t){return super.setContext(...t),this._childCate?this._childCate.setContext(...t):this._child&&this._child.map(e=>e.setContext(...t)),this}clearContext(...t){return super.clearContext(...t),this._childCate?this._childCate.clearContext(...t):this._child&&this._child.map(e=>e.clearContext(...t)),this}}class w extends g{clone(){const t=new w;return Object.assign(t,this),t}}t.exports={T:g,ObjectT:b,ArrayT:v,NotAtT:x,AtT:y,NeverT:w}},function(t,e,i){const{isString:n,whatType:r,isFunction:s}=i(0);class a extends Error{constructor({message:t="Validate error!",source:e}={}){super(t),n(t)||s(t)||console.error("message expected a string || function"),this.message="function"==typeof t?t(e):t,this.source=e,this.name="ValidateError"}}t.exports={ValidateError:a,ValidateTypeError:class extends a{constructor({type:t,message:e,field:i,...n}={}){super(n),this.type=t,this.name="ValidateTypeError",this.message=`${i?i+"is":""}expected a ${t} type, got a ${r(this.source)}`}}}},function(t,e,i){const n=i(2),r=i(3),s=i(4),{allValidates:a,getValidateByType:o,asset:c}=i(0),{defineUnEnumerableProperty:h,removeEmpty:l}=i(1);t.exports={...n,...r,...s,...a,getValidateByType:o,asset:c,defineUnEnumerableProperty:h,removeEmpty:l}},function(t,e,i){const{asset:n,isFunction:r}=i(0),{relateDate:s,formatDate:a}=i(1),o={length(t,e){return n(t,"Integer","length expected a integer"),n(t,t=>t>=0,"length expected a integer gte then 0"),this._length=t,this.addValidator({name:"Length",validator:this._validateLength.bind(this),message:e||(t=>`expected a ${this._type}, length at ${this._length}, but got a length: ${t.length}`)}),this},min(t,e){return n(t,"Integer","min expected a integer"),n(t,t=>t>0,"min expected a integer gte then 0"),this._max&&n(t,t=>t<=this._max,"min expected a integer lte then max: "+this._max),this._min=t,this.addValidator({name:"Min",validator:this._validateMin.bind(this),message:e||(t=>`expected a ${this._type}, length gte than ${this._min}, but got a length: ${t.length}`)}),this},max(t,e){return n(t,"Integer","max expected a integer"),n(t,t=>t>0,"max expected a integer gte then 0"),this._min&&n(t,t=>t>=this._min,"min expected a integer lte then max: "+this._min),this._max=t,this.addValidator({name:"Max",validator:this._validateMax.bind(this),message:e||(t=>`expected a ${this._type}, length lte than ${this._max}, but got a length: ${t.length}`)}),this},_validateLength(t){if(void 0!==this._length&&["String","Array"].includes(this._type))return t.length===this._length},_validateMin(t){if(void 0!==this._min&&["String","Array"].includes(this._type))return t.length>=this._min},_validateMax(t){if(void 0!==this._max&&["String","Array"].includes(this._type))return t.length<=this._max}},c={min(t,e){return n(t,"Integer","min expected a integer"),this._max&&n(t,t=>t<=this._max,"min expected a integer lte then max: "+this._max),this._min=t,this.addValidator({name:"Min",validator:this._validateMin.bind(this),message:e||(t=>`expected a ${this._type}, value gte than ${this._min}, but got a: ${t}`)}),this},max(t,e){return n(t,"Integer","max expected a integer"),this._min&&n(t,t=>t>=this._min,"min expected a value integer lte then max: "+this._min),this._max=t,this.addValidator({name:"Max",validator:this._validateMax.bind(this),message:e||(t=>`expected a ${this._type}, value lte than ${this._max}, but got a: ${t}`)}),this},_validateMin(t){if(void 0!==this._min&&["Number","Integer","Float"].includes(this._type))return t>=this._min},_validateMax(t){if(void 0!==this._max&&["Number","Integer","Float"].includes(this._type))return t<=this._max}},h={min(t,e){return n(t,"Date","min expected a date"),this._max&&n(t,t=>-1===s(t,this._max),`min scope expected a date before ${a(this._max)}, but got a ${a(t)}`),this._min=t,this.addValidator({name:"Min",validator:this._validateMin.bind(this),message:e||(t=>`expected a date after ${a(this._min)}, but got a ${a(t)}`)}),this},max(t,e){return n(t,"Date","max expected a date"),this._min&&n(t,t=>1===s(t,this._min),`max scope expected a date after ${a(this._min)}, but got a ${a(t)}`),this._max=t,this.addValidator({name:"Max",validator:this._validateMax.bind(this),message:e||(t=>`expected a date before ${a(this._max)}, but got a ${a(t)}`)}),this},_validateMin(t){if(void 0!==this._min)return-1!==s(t,this._min)},_validateMax(t){if(void 0!==this._max)return 1!==s(t,this._max)}},l={enum(t,e){if(n(t,"Array","enum expected a array"),r(this.check)){const e=this.test(...t);if(e)throw e}return this._enum=t,this.addValidator({name:"Enum",validator:this._validateEnum.bind(this),message:e||(t=>`expected a data value at ${this._enum}, but got a ${t}`)}),this},_validateEnum(t){if(void 0!==this._enum)return this._enum.includes(t)}},d={pattern(t,e){return n(t,"Pattern","pattern expected a reg"),this._pattern=t,this.addValidator({name:"Pattern",validator:this._validatePattern.bind(this),message:e||`expected a data match pattern: /${this._pattern.source}/${this._pattern.flags}`}),this},_validatePattern(t){if(void 0!==this._pattern&&["String","Number"].includes(this._type))return this._pattern.test(t)}};t.exports={rangeMixin:o,enumMixin:l,patternMixin:d,dateRangeMixin:h,numberRangeMixin:c,useMixin:function(t,e){for(const i in e)t[i]=e[i]}}}])}));